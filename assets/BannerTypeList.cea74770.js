/* empty css                  */import{t as a,N as e}from"./nopic.b9cd70dd.js";/* empty css               */import{f as t,x as s,w as o,g as l,j as d,a3 as r,A as n,a6 as u,o as i,m as p,n as c,D as y,F as m,I as h,a8 as f,J as g,H as v,t as w,c as k}from"./vendor.cc5c9397.js";const C={class:"type-list"},b={class:"seach-section"},_={class:"create-type"},I=v("添加轮播图分类"),T=v("删除选择"),x={class:"type-list-table"},A=c("img",{src:e},null,-1),j=v("编辑 "),z=v("启用 "),B=v("冻结 "),L=v("删除 ");var M=t({name:"BannerTypeList",setup(e){const t=s(),{proxy:M}=o();M.$serverUrl;const $=l([]),D=l([]);d((()=>{S()}));const E=r((()=>$.value.length>0)),S=()=>{M.$axios.get("/bannerType",{headers:{token:document.cookie}}).then((e=>{if(1041==e.data.status)return t.push({name:"Login"});1230==e.data.status&&(e.data.data.forEach((e=>{e.createdAt=a.formatDate(e.createdAt,"yyyy-MM-dd hh:mm:ss"),e.updatedAt=a.formatDate(e.updatedAt,"yyyy-MM-dd hh:mm:ss")})),D.value=e.data.data)})).catch((a=>{console.log("error",a)}))},q=a=>{M.$axios({method:"post",url:"/banTypeStatus",data:{typeId:a.typeId,status:0==a.status?1:0},headers:{token:document.cookie}}).then((e=>{if(1041==e.data.status)return t.push({name:"Login"});1240==e.data.status&&1==e.data.data.result[0]?(g({message:e.data.msg,showClose:!0,type:"success"}),a.status=e.data.data.status):g({message:e.data.msg,type:"error",showClose:!0})})).catch((a=>{console.log("err ==> ",a)}))},F=a=>{$.value=[],a.forEach((a=>{$.value.push(a.typeId)}))},H=a=>{M.$axios({method:"post",url:"/removeType",data:{typeIds:a,type:"BannerType"},headers:{token:document.cookie}}).then((a=>{if(1041==a.data.status)return t.push({name:"Login"});1100==a.data.status?(g({message:a.data.msg,showClose:!0,type:"success"}),D.value=[],S()):g({message:a.data.msg,type:"error",showClose:!0})})).catch((a=>{console.log("err ==> ",a)}))},J=()=>{H($.value)},N=()=>{t.push({name:"BannerType"})};return(a,e)=>{const s=n,o=u;return i(),p("div",C,[c("div",b,[c("div",_,[y(s,{type:"primary",onClick:N},{default:m((()=>[I])),_:1}),y(s,{type:"danger",disabled:!h(E),onClick:J},{default:m((()=>[T])),_:1},8,["disabled"])])]),c("div",x,[y(h(f),{ref:"multipleTableRef",data:D.value,onSelectionChange:F},{default:m((()=>[y(o,{type:"selection",width:"55"}),y(o,{property:"title",label:"名称",width:"120"}),y(o,{property:"status",label:"状态",width:"120","show-overflow-tooltip":""},{default:m((a=>[v(w(0==a.row.status?"正常":"冻结"),1)])),_:1}),y(o,{label:"更新时间",width:"180"},{default:m((a=>[v(w(a.row.createdAt),1)])),_:1}),y(o,{label:"图片",width:"180"},{default:m((a=>[A])),_:1}),y(o,{label:"操作"},{default:m((a=>[y(s,{size:"small",type:"default",plain:"",onClick:e=>{return s=a.row.typeId,void t.push({name:"BannerType",query:{typeId:s}});var s}},{default:m((()=>[j])),_:2},1032,["onClick"]),1==a.row.status?(i(),k(s,{key:0,size:"small",type:"success",plain:"",onClick:e=>q(a.row)},{default:m((()=>[z])),_:2},1032,["onClick"])):(i(),k(s,{key:1,size:"small",type:"warning",plain:"",onClick:e=>q(a.row)},{default:m((()=>[B])),_:2},1032,["onClick"])),y(s,{size:"small",type:"danger",plain:"",onClick:e=>{return t=a.row.typeId,void H([t]);var t}},{default:m((()=>[L])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])])}}});export{M as default};
